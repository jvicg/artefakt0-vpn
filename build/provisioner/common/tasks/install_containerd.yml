# common/tasks/install_containerd.yml
# Install containerd

- name: Add signing key for Docker apt repository
  ansible.builtin.apt_key:
    url: '{{ docker.key }}'
    state: present

- name: Add Docker apt repository
  ansible.builtin.apt_repository:
    repo: '{{ docker.repo }}'
    state: present

- name: Install containerd
  ansible.builtin.apt:
    name: containerd.io
    update_cache: true

- name: Enable containerd service
  ansible.builtin.service:
    name: containerd
    state: restarted
    enabled: true
    daemon_reload: true
